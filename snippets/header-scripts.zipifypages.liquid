{% capture zp_entity_data %} {% assign zp_entity_marker = template.name %} {% assign zp_shop_style_dir = shop.permanent_domain | sha1 %} {% if zp_entity_marker == 'article' %} {% assign zp_current_entity = article %} {% assign zp_current_entity_content = '' | append: zp_current_entity.content %} {% assign zp_entity_attributes_class = 'aac' %} {% assign zp_scripts_metafield_key = 'articlescripts' %} {% assign zp_entity_data_metafield_key = 'articledata' %} {% assign zp_entity_styles_folder = 'articles_style' %} {% elsif zp_entity_marker == 'blog' %} {% assign zp_current_entity = blog %} {% assign zp_current_entity_content = '' | append: zp_current_entity.metafields['zipifypagesblogparts']['blogheaderfooter'] %} {% assign zp_entity_attributes_class = 'bac' %} {% assign zp_scripts_metafield_key = 'blogscripts' %} {% assign zp_entity_data_metafield_key = 'blogdata' %} {% assign zp_entity_styles_folder = 'blogs_style' %} {% else %} {% assign zp_current_entity = page %} {% assign zp_current_entity_content = '' | append: zp_current_entity.content %} {% assign zp_entity_attributes_class = 'pac' %} {% assign zp_scripts_metafield_key = 'pagescripts' %} {% assign zp_entity_data_metafield_key = 'pagedata' %} {% assign zp_entity_styles_folder = 'pages_style' %} {% assign zp_entity_marker = 'page' %} {% endif %} {% assign zp_entity_content_wrapper_class = '' | append: zp_entity_attributes_class | append: '-' | append: zp_current_entity.id %} {% assign zp_entity_style_name = zp_current_entity.id | sha1 %} {% assign zp_alternative_entity_present = false %} {% assign zp_split_single_page_render = false %} {% assign zp_current_entity_content = '' | append: zp_current_entity_content | split: ':|zpendofcontent|:' | first %} {% if zp_current_entity_content contains 'data-zp-crm-btn-popup' %} {% assign zp_show_buttons_popup = true %} {% else %} {% assign zp_show_buttons_popup = false %} {% endif %} {% assign zp_split_test_data = '' | append: zp_current_entity.metafields['zipifypages']['splittest'] | split: ':|~|:' %} {% if zp_split_test_data.size > 1 %} {% if zp_split_test_data[0] == 'mainlayout' %} {% assign zp_alternative_entity_handle = '' | append: zp_split_test_data[1] %} {% if zp_entity_marker == 'article' %} {% assign zp_alternative_entity = articles[zp_alternative_entity_handle] %} {% assign zp_alternative_entity_content = '' | append: zp_alternative_entity.content %} {% elsif zp_entity_marker == 'blog' %} {% assign zp_alternative_entity = blogs[zp_alternative_entity_handle] %} {% assign zp_alternative_entity_content = '' | append: zp_alternative_entity.metafields['zipifypagesblogparts']['blogheaderfooter'] %} {% elsif zp_entity_marker == 'page' %} {% assign zp_alternative_entity = pages[zp_alternative_entity_handle] %} {% assign zp_alternative_entity_content = '' | append: zp_alternative_entity.content %} {% else %} {% assign zp_alternative_entity = nil %} {% assign zp_alternative_entity_content = '' %} {% endif %} {% assign zp_alternative_entity_content = '' | append: zp_alternative_entity_content | split: ':|zpendofcontent|:' | first %} {% assign zp_alternative_entity_id_size = '' | append: zp_alternative_entity.id | size %} {% if zp_alternative_entity_id_size > 0 %} {% assign zp_alternative_entity_present = true %} {% assign zp_split_dataset = '' | append: zp_split_test_data[2] %} {% assign zp_split_single_page_render = '' | append: zp_split_test_data[3] %} {% assign zp_split_token = '' | append: zp_split_test_data[4] %} {% if zp_split_single_page_render == 'true' %} {% assign zp_split_single_page_render = true %} {% else %} {% assign zp_split_single_page_render = false %} {% endif %} {% assign zp_alternative_entity_title = '' | append: zp_alternative_entity.title %} {% assign zp_entity_style_name = zp_alternative_entity.id | sha1 %} {% assign zp_entity_scripts = '' | append: zp_alternative_entity.metafields['zipifypages']['pagescripts'] | split: '|;|~|;|' %}{% assign zp_alternative_header_scripts = '' | append: zp_entity_scripts[0] | strip %}{% assign zp_alternative_footer_scripts = '' | append: zp_entity_scripts[1] | strip %}{% assign zp_entity_scripts = '' %} {% if zp_alternative_entity.content contains 'data-zp-crm-btn-popup' %} {% assign zp_show_buttons_popup = true %} {% endif %} {% endif %} {% assign zp_alternative_entity_content_wrapper_class = '' | append: zp_entity_attributes_class | append: '-' | append: zp_alternative_entity.id %} {% endif %} {% endif %} {% assign zp_entity_title = page_title | remove: ':|~|:' | remove: ':--:' %}{% endcapture %}{% assign zp_entity_data = '' %}{% if zp_use_meta_tags == nil or zp_use_meta_tags == true %}<title>{{ zp_entity_title }}</title>{% endif %}<link rel="preload" href="https://cdn03.zipify.com/css/zipifypages.css" as="style"><link rel="preload" href="https://cdn03.zipify.com/javascript/page-published-scripts.min.js" as="script"><link rel="preload" href="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" as="script"><link rel="dns-prefetch" href="https://{{ shop.domain }}/"><link rel="dns-prefetch" href="https://cdn01.zipify.com/"><link rel="dns-prefetch" href="https://cdn02.zipify.com/"><link rel="dns-prefetch" href="https://cdn03.zipify.com/"><link rel="dns-prefetch" href="https://www.google-analytics.com/"><link rel="preconnect" href="https://{{ shop.domain }}/"><link rel="preconnect" href="https://cdn01.zipify.com/"><link rel="preconnect" href="https://cdn02.zipify.com/"><link rel="preconnect" href="https://cdn03.zipify.com/"><link rel="preconnect" href="https://www.google-analytics.com/">{% if zp_alternative_entity_present == false %}<link rel="stylesheet" type="text/css" href="https://zipifypages.zipify.com/{{ zp_entity_styles_folder }}/{{ zp_shop_style_dir }}/{{ zp_entity_style_name }}.css">{% endif %}<link rel="stylesheet" type="text/css" href="https://cdn03.zipify.com/css/zipifypages.css"><style>html{padding-top:0!important}body{font-synthesis:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}</style>{% capture zp_entity_data %}
  {% assign zp_app_integrations = '' | append: shop.metafields['zipifypages']['appintegrations'] | split: ',' %}
{% endcapture %}{% include 'page-content-parser.zipifypages' %}{% capture zp_entity_data %} {% if zp_use_open_graph_tags == nil or zp_use_open_graph_tags == true %} {% assign zp_show_open_graph_tags = true %} {% else %} {% assign zp_show_open_graph_tags = false %} {% endif %} {% if zp_show_open_graph_tags == true %} {% capture zp_open_graph_meta_html %} <meta property="og:title" content="zps_open_graph_title" /> <meta property="og:description" content="zps_open_graph_description" /> <meta property="og:url" content="zps_open_graph_url" /> <meta property="og:image" content="zps_open_graph_image_url" /> <meta name="twitter:title" content="zps_open_graph_title" /> <meta name="twitter:description" content="zps_open_graph_description" /> <meta name="twitter:image" content="zps_open_graph_image_url" /> {% endcapture %} {% endif %} {% assign zp_settings_separator = ':|~|:' %} {% assign zp_key_separator = ':--:' %} {% assign zp_object_settings_data = '' | append: zp_current_entity.metafields['zipifypages'][zp_entity_data_metafield_key] | strip %} {% assign zp_entity_data_settings = '' %} {% assign zp_entity_fonts_settings = '' %} {% assign zp_article_show_author_option = '' %} {% assign zp_article_publish_date_type_option = '' %} {% assign zp_article_specific_date_value = '' %} {% assign zp_show_blog_articles_authors = '' %} {% assign zp_show_blog_articles_publish_date = '' %} {% assign zp_settings_keys = '' %}{% assign zp_settings_values = '' %}{% assign zp_object_settings = zp_object_settings_data | strip | split: zp_settings_separator %}{% assign zp_object_settings_data = '' %}{% for zp_setting in zp_object_settings %} {% assign zp_setting_key = zp_setting | strip | split: zp_key_separator %} {% assign zp_remove_setting_key = zp_setting_key | first %} {% assign zp_setting_key = zp_setting_key | first | downcase %} {% assign zp_settings_keys = zp_settings_keys | append: zp_settings_separator | append: zp_setting_key %} {% assign zp_remove_setting_key = zp_remove_setting_key | append: zp_key_separator %} {% assign zp_setting_value = zp_setting | remove_first: zp_remove_setting_key %} {% assign zp_settings_values = zp_settings_values | append: zp_settings_separator | append: zp_setting_value %}{% endfor %}{% assign zp_object_settings = '' %}{% assign zp_settings_keys = zp_settings_keys | remove_first: zp_settings_separator %}{% assign zp_settings_values = zp_settings_values | remove_first: zp_settings_separator %}{% assign zp_settings_keys = zp_settings_keys | split: zp_settings_separator %}{% assign zp_settings_values = zp_settings_values | split: zp_settings_separator %} {% for zp_setting_key in zp_settings_keys %} {% if 'page_settings_data' == zp_setting_key %} {% assign zp_entity_data_settings = '' | append: zp_settings_values[forloop.index0] | strip %} {% elsif 'page_fonts_settings' == zp_setting_key %} {% assign zp_entity_fonts_settings = '' | append: zp_settings_values[forloop.index0] | strip %} {% elsif 'hide_author_option' == zp_setting_key %} {% assign zp_article_show_author_option = '' | append: zp_settings_values[forloop.index0] | strip %} {% elsif 'publish_date_type_option' == zp_setting_key %} {% assign zp_article_publish_date_type_option = '' | append: zp_settings_values[forloop.index0] | strip %} {% elsif 'specific_date_value' == zp_setting_key %} {% assign zp_article_specific_date_value = '' | append: zp_settings_values[forloop.index0] | strip %} {% elsif 'show_blog_articles_authors_option' == zp_setting_key %} {% assign zp_show_blog_articles_authors = '' | append: zp_settings_values[forloop.index0] | strip %} {% elsif 'show_blog_articles_publish_date_option' == zp_setting_key %} {% assign zp_show_blog_articles_publish_date = '' | append: zp_settings_values[forloop.index0] | strip %} {% elsif zp_show_open_graph_tags == true %} {% assign zp_replacement_key = 'zps_' | append: zp_setting_key | downcase %} {% assign zp_replacement_value = '' | append: zp_settings_values[forloop.index0] | strip | escape %} {% if zp_replacement_value.size > 0 %} {% assign zp_open_graph_meta_html = zp_open_graph_meta_html | replace: zp_replacement_key, zp_replacement_value %} {% endif %} {% endif %} {% endfor %} {% if zp_alternative_entity_present == true %} {% assign zp_settings_separator = ':|~|:' %} {% assign zp_key_separator = ':--:' %} {% assign zp_object_settings_data = '' | append: zp_alternative_entity.metafields['zipifypages'][zp_entity_data_metafield_key] | strip %} {% assign zp_settings_keys = '' %}{% assign zp_settings_values = '' %}{% assign zp_object_settings = zp_object_settings_data | strip | split: zp_settings_separator %}{% assign zp_object_settings_data = '' %}{% for zp_setting in zp_object_settings %} {% assign zp_setting_key = zp_setting | strip | split: zp_key_separator %} {% assign zp_remove_setting_key = zp_setting_key | first %} {% assign zp_setting_key = zp_setting_key | first | downcase %} {% assign zp_settings_keys = zp_settings_keys | append: zp_settings_separator | append: zp_setting_key %} {% assign zp_remove_setting_key = zp_remove_setting_key | append: zp_key_separator %} {% assign zp_setting_value = zp_setting | remove_first: zp_remove_setting_key %} {% assign zp_settings_values = zp_settings_values | append: zp_settings_separator | append: zp_setting_value %}{% endfor %}{% assign zp_object_settings = '' %}{% assign zp_settings_keys = zp_settings_keys | remove_first: zp_settings_separator %}{% assign zp_settings_values = zp_settings_values | remove_first: zp_settings_separator %}{% assign zp_settings_keys = zp_settings_keys | split: zp_settings_separator %}{% assign zp_settings_values = zp_settings_values | split: zp_settings_separator %} {% assign zp_alternative_data_settings = '' %} {% assign zp_alternative_fonts_settings = '' %} {% for zp_setting_key in zp_settings_keys %} {% if 'page_settings_data' == zp_setting_key %} {% assign zp_alternative_data_settings = '' | append: zp_settings_values[forloop.index0] | strip %} {% elsif 'page_fonts_settings' == zp_setting_key %} {% assign zp_alternative_fonts_settings = '' | append: zp_settings_values[forloop.index0] | strip %} {% elsif 'page_last_sync_date' == zp_setting_key %} {% assign zp_alternative_last_sync = '' | append: zp_settings_values[forloop.index0] | strip %} {% endif %} {% endfor %} {% endif %} {% assign zp_settings_keys = '' %} {% assign zp_settings_values = '' %} {% assign zp_entity_description = '' | append: zp_current_entity.metafields['global']['description_tag'] | strip %} {% if zp_entity_description.size < 1 %} {% if zp_split_single_page_render == true %} {% assign zp_entity_description = '' | append: zp_current_entity_content | split: zp_split_parts_separator | first | replace: 'zp__script', 'script' %} {% else %} {% assign zp_entity_description = '' | append: zp_current_entity_content %} {% endif %} {% assign zp_entity_description = '' | append: zp_entity_description | strip | strip_html | strip | newline_to_br | strip_newlines | strip %}{% assign zp_entity_description = zp_entity_description | replace: '<br />', ' ' | replace: '<br/>', ' ' | replace: '<br>', ' ' | replace: ':|~|:', '' | replace: ':--:', '' %}{% assign zp_entity_description_parts = zp_entity_description | split: ' ' %}{% assign zp_entity_description = '' %}{% for zp_part in zp_entity_description_parts %} {% assign zp_content_part = zp_part | strip %} {% if zp_content_part.size > 0 %} {% assign zp_entity_description = zp_entity_description | append: ' ' | append: zp_content_part %} {% endif %}{% endfor %}{% assign zp_part = '' %}{% assign zp_content_part = '' %}{% assign zp_entity_description = zp_entity_description | strip | truncate: 160, '' %}{% assign zp_entity_description_parts = '' %} {% endif %} {% if zp_show_open_graph_tags == true %} {% assign zp_open_graph_title = zp_entity_title | escape %} {% assign zp_open_graph_description = zp_entity_description | escape %} {% assign zp_open_graph_url = canonical_url %} {% if zp_open_graph_meta_html contains 'zps_open_graph_image_url' %} {% if zp_split_single_page_render == true %} {% assign zp_open_graph_search_content = '' | append: zp_current_entity_content | split: zp_split_parts_separator | first %} {% else %} {% assign zp_open_graph_search_content = '' | append: zp_current_entity_content %} {% endif %} {% assign zp_img_tag = '<' | append: 'img' %}{% if zp_open_graph_search_content contains zp_img_tag %} {% assign zp_open_graph_image_url = '' %} {% assign zp_img_parts = zp_open_graph_search_content | split: zp_img_tag %} {% for zp_img_part in zp_img_parts %} {% assign zp_img_src = zp_img_part | split: ' src=' %} {% assign zp_img_src = zp_img_src[1] | split: ' ' | first | split: '' %} {% assign zp_img_src_result = '' %} {% assign zp_img_src_result_size = 0 %} {% for zp_img_src_part in zp_img_src %} {% if zp_img_src_part == "'" or zp_img_src_part == '"' %} {% if zp_img_src_result_size < 1 %} {% continue %} {% else %} {% break %} {% endif %} {% endif %} {% assign zp_img_src_result = zp_img_src_result | append: zp_img_src_part %} {% assign zp_img_src_result_size = zp_img_src_result | size %} {% endfor %} {% assign zp_img_src = '' %} {% unless zp_img_src_result contains 'assets/no-image-' %} {% if zp_img_src_result_size > 0 %} {% assign zp_open_graph_image_url = zp_img_src_result | split: '?' | first %} {% break %} {% endif %} {% endunless %} {% endfor %} {% assign zp_img_part = '' %} {% assign zp_img_parts = '' %}{% else %} {% assign zp_open_graph_image_url = '' %}{% endif %}{% assign zp_open_graph_search_content = '' %} {% else %} {% assign zp_open_graph_image_url = '' %} {% endif %} {% assign zp_open_graph_fields = '' | append: 'open_graph_title:|~|:open_graph_description:|~|:open_graph_url:|~|:open_graph_image_url' | split: ':|~|:' %} {% assign zp_open_graph_values = '' | append: zp_open_graph_title | append: ':|~|:' | append: zp_open_graph_description | append: ':|~|:' | append: zp_open_graph_url | append: ':|~|:' | append: zp_open_graph_image_url | split: ':|~|:' %} {% for zp_setting_key in zp_open_graph_fields %} {% assign zp_replacement_key = 'zps_' | append: zp_setting_key | downcase %} {% assign zp_replacement_value = '' | append: zp_open_graph_values[forloop.index0] | strip %} {% assign zp_open_graph_meta_html = zp_open_graph_meta_html | replace: zp_replacement_key, zp_replacement_value %} {% endfor %} {% assign zp_open_graph_title = '' %}{% assign zp_open_graph_description = '' %}{% assign zp_open_graph_url = '' %}{% assign zp_open_graph_image_url = '' %} {% assign zp_open_graph_fields = '' %} {% assign zp_open_graph_values = '' %} {% endif %} {% if zp_use_viewport_meta == nil or zp_use_viewport_meta == true %} {% assign zp_use_viewport_meta_tag = true %} {% else %} {% assign zp_use_viewport_meta_tag = false %} {% endif %}{% endcapture %}{% assign zp_entity_data = '' %}{% if zp_use_meta_tags == nil or zp_use_meta_tags == true %}{% if zp_entity_description.size > 0 %}<meta name="description" content="{{ zp_entity_description | escape }}{% assign zp_entity_description = '' %}">{% endif %}<link rel="canonical" href="{{ canonical_url }}">{% endif %}{% if zp_show_open_graph_tags == true %}{{ zp_open_graph_meta_html | strip }}{% assign zp_open_graph_meta_html = '' %}{% endif %}{% if zp_current_entity.template_suffix == 'custom.zipifypages' and zp_use_viewport_meta_tag == true %}<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">{% endif %}{% if zp_alternative_entity_present == true %}
{% capture zp_entity_data %} {% assign zp_alternative_entity_styles_url = 'https://zipifypages.zipify.com/' | append: zp_entity_styles_folder | append: '/' | append: zp_shop_style_dir | append: '/' | append: zp_entity_style_name | append: '.css' | json %} {% assign zp_entity_style_name = zp_current_entity.id | sha1 %} {% assign zp_main_entity_styles_url = 'https://zipifypages.zipify.com/' | append: zp_entity_styles_folder | append: '/' | append: zp_shop_style_dir | append: '/' | append: zp_entity_style_name | append: '.css' | json %} {% assign zp_shop_style_dir = '' %} {% assign zp_entity_style_name = '' %} {% assign zp_entity_styles_folder = '' %} {% assign zp_split_data_string = '{' %} {% assign zp_replacement_value = zp_entity_marker | json %} {% assign zp_split_data_string = zp_split_data_string | append: 'entityMarker:' | append: zp_replacement_value %} {% assign zp_replacement_value = zp_current_entity.handle | json %} {% assign zp_split_data_string = zp_split_data_string | append: ',handles:{main:' | append: zp_replacement_value %} {% assign zp_replacement_value = zp_alternative_entity_handle | json %} {% assign zp_split_data_string = zp_split_data_string | append: ',alternative:' | append: zp_replacement_value %} {% assign zp_split_data_string = zp_split_data_string | append: '},styles:{main:' | append: zp_main_entity_styles_url %} {% assign zp_main_entity_styles_url = '' %} {% assign zp_split_data_string = zp_split_data_string | append: ',alternative:' | append: zp_alternative_entity_styles_url %} {% assign zp_alternative_entity_styles_url = '' %} {% assign zp_replacement_value = zp_split_single_page_render | json %} {% assign zp_split_data_string = zp_split_data_string | append: '},singlePageRender:' | append: zp_replacement_value %} {% assign zp_replacement_value = zp_entity_content_wrapper_class | json %} {% assign zp_split_data_string = zp_split_data_string | append: ',wrapperClasses:{main:' | append: zp_replacement_value %} {% assign zp_replacement_value = zp_alternative_entity_content_wrapper_class | json %} {% assign zp_alternative_entity_content_wrapper_class = '' %} {% assign zp_split_data_string = zp_split_data_string | append: ',alternative:' | append: zp_replacement_value %} {% assign zp_replacement_value = '' | append: zp_current_entity.title | json %} {% assign zp_split_data_string = zp_split_data_string | append: '},titles:{main:' | append: zp_replacement_value %} {% assign zp_replacement_value = zp_alternative_entity_title | json %} {% assign zp_alternative_entity_title = '' %} {% assign zp_split_data_string = zp_split_data_string | append: ',alternative:' | append: zp_replacement_value %} {% assign zp_replacement_value = '{classes:false,timeout:9000,' | append: zp_entity_fonts_settings | append: '}' %} {% assign zp_entity_fonts_settings = '' %} {% assign zp_split_data_string = zp_split_data_string | append: '},fonts:{main:' | append: zp_replacement_value %} {% assign zp_replacement_value = '{classes:false,timeout:9000,' | append: zp_alternative_fonts_settings | append: '}' %} {% assign zp_alternative_fonts_settings = '' %} {% assign zp_split_data_string = zp_split_data_string | append: ',alternative:' | append: zp_replacement_value %} {% assign zp_replacement_value = '' | append: zp_split_dataset | json %} {% assign zp_split_data_string = zp_split_data_string | append: '},dataSet:' | append: zp_replacement_value %} {% assign zp_replacement_value = '' | append: zp_alternative_last_sync | json %} {% assign zp_split_data_string = zp_split_data_string | append: ',lastSync:' | append: zp_replacement_value %} {% assign zp_split_data_string = zp_split_data_string | append: '}' %} {% assign zp_replacement_value = '' %} {% assign zp_split_dataset = '' %}{% endcapture %}{% assign zp_entity_data = '' %}<script>!function(t){function e(){}function n(){}function r(){this.storage=new e}function o(){this.storage=S?window.sessionStorage:null}function i(){this.events={}}function a(t){this.defaultVariation="a";try{this.data=JSON.parse(t)}catch(t){this.data=null}}function s(){this.state=this.getStoredState(),this.mainState="main",this.scopes={"article":"articles","blog":"blogs","page":"pages"},this.entityMarker=""+t.entityMarker,this.availableStates={a:"main",b:"alternative"}}function u(){}function c(){}function p(){}function l(){}function y(){P=!0,T.trigger("entityPrepared")}function d(){C=!0,T.trigger("entityStateLoaded")}function g(){b.entity={getContent:w.getContent.bind(w)}}function f(){var t=!1;if(void 0!==document.createRange&&void 0!==document.createRange().createContextualFragment)try{document.createRange().createContextualFragment("<div></div>"),t=!0}catch(e){t=!1}else t=!1;return t}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),e.prototype.getItem=function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0},e.prototype.setItem=function(t,e,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var o=new Date;o.setTime(o.getTime()+1e3*r),r=n.expires=o}r&&r.toUTCString&&(n.expires=r.toUTCString());var i=t+"="+(e=encodeURIComponent(e));for(var a in n)if(n.hasOwnProperty(a)){i+="; "+a;var s=n[a];!0!==s&&(i+="="+s)}document.cookie=i},e.prototype.removeItem=function(t){this.setItem(t,"",{expires:-1})},n.prototype.request=function(t){var e=new XMLHttpRequest,n=this.prepareParams(t);e.timeout=n.timeout,e.onload=function(){e.readyState===XMLHttpRequest.DONE&&(200===e.status?n.onSuccess(e.responseText,e):n.onError(e,null))},e.ontimeout=function(t){n.onTimeout(e,t)},e.onerror=function(t){n.onError(e,t)},e.open(n.method,n.url,!0);for(var r,o=0,i=n.headers.length;o<i;o++)r=n.headers[o],e.setRequestHeader(r[0],r[1]);e.send()},n.prototype.prepareParams=function(t){return{url:t.url,method:t.method||"GET",timeout:t.timeout||0,onSuccess:t.onSuccess||function(){},onError:t.onError||function(){},onTimeout:t.onTimeout||function(){},headers:t.headers||[]}},r.prototype.getItem=function(){return this.storage.getItem.apply(this.storage,arguments)},r.prototype.setItem=function(){this.storage.setItem.apply(this.storage,arguments)},o.prototype.getItem=function(){return this.storage?this.storage.getItem.apply(this.storage,arguments):null},o.prototype.setItem=function(){this.storage&&this.storage.setItem.apply(this.storage,arguments)},i.prototype.on=function(t,e,n){"function"==typeof e&&(this.events[t]=this.events[t]||[],this.events[t].push([e,n]))},i.prototype.trigger=function(t,e){for(var n,r=this.events[t]||[],o=0,i=r.length;o<i;o++)(n=r[o])[0].call(n[1],e)},a.prototype.selectVariation=function(){if(!this.data)return this.defaultVariation;try{var t,e=[],n=null;for(t in this.data)this.data.hasOwnProperty(t)&&(n=parseFloat(this.data[t]),isNaN(n)||e.push([n,t]));if(e.length>1){var r,o,i,a=0,s=null;for(t=0,r=e.length;t<r;t++)a+=e[t][0];for(i=Math.random()*a,t=0,r=e.length;t<r;t++){if((o=e[t][0])>=i){s=e[t][1];break}i-=o}return s||this.defaultVariation}return this.defaultVariation}catch(t){return console.error("selectVariation error",t),this.defaultVariation}},s.prototype.getAvailableState=function(t){return this.availableStates[t]||this.mainState},s.prototype.loadCurrentState=function(){S||h?T.trigger("currentStateSelected",F.selectVariation()):T.trigger("currentStateSelectionError","storage unavailable")},s.prototype.getState=function(){return this.state},s.prototype.setState=function(t){return this.state=t,E.setItem("zipifyPagesCurrentState",this.state),this.state},s.prototype.getStoredState=function(){return E.getItem("zipifyPagesCurrentState")},s.prototype.currentScope=function(){return this.scopes[this.entityMarker]},s.prototype.currentEntityHandle=function(){return t.handles[this.getState()]},s.prototype.loadEntitySource=function(){if(this.currentScope()&&this.currentEntityHandle())if(this.getState()!==this.mainState){var t="/"+this.currentScope()+"/"+this.currentEntityHandle();try{I.request({url:t,timeout:2e3,onSuccess:function(t){T.trigger("alternativeSourceLoaded",t)},onError:function(t){T.trigger("alternativeSourceLoadingError",t)},onTimeout:function(t){T.trigger("alternativeSourceTimeoutError",t)}})}catch(t){T.trigger("alternativeSourceLoadingError",t)}}else y();else T.trigger("alternativeSourceLoadingError","currentScope or currentEntityHandle is empty")},u.prototype.init=function(t){this.doc=H.htmlToDOM(t)},u.prototype.prepareEntityContent=function(){var t=this.doc.querySelector("#zp-entity-content-wrapper");return t?("string"==typeof t.innerHTML?t.innerHTML:"").trim():""},u.prototype.saveEntityParts=function(){v.setItem("zipifyPagesEntityLastSync",m),v.setItem("zipifyPagesEntityContent",this.prepareEntityContent())},u.prototype.getContent=function(){return v.getItem("zipifyPagesEntityContent")},u.prototype.isCachedContentExpired=function(){var t=parseInt(v.getItem("zipifyPagesEntityLastSync"));return(t=isNaN(t)?-1:t)<m},c.prototype.parse=function(t){if("string"==typeof t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes}return[]},c.prototype.htmlToDOM=function(t){var e=document.createElement("html");return e.innerHTML=t,e},c.prototype.parseAndAppendElement=function(t,e,n,r){var o=null,i=e||document.getElementsByTagName("body")[0],a=i&&void 0!==i.appendChild,s=!1,u="function"==typeof r;if(t&&a)try{switch(t.nodeType){case 3:var c=t.nodeValue||"";o=c.length>0?document.createTextNode(c):null;break;case 1:var p=(t.nodeName||"").toLowerCase();o="svg"===p||"use"===p?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName);for(var l,y=t.attributes.length-1;y>=0;y--)if(l=""+t.attributes[y].name,"use"===p&&l.match(/^xlink:/)){var d=l.split(":");o.setAttributeNS("http://www.w3.org/1999/xlink",d[1],t.attributes[y].value)}else o.setAttribute(l,t.attributes[y].value);o.innerHTML=n?t.innerHTML:"","script"===p&&null!==o.getAttribute("src")&&null===o.getAttribute("async")&&(s=!0,u&&(o.onload=function(){r(o)},o.onerror=function(){r(o)}))}o?(i.appendChild(o),!s&&u&&r(o)):u&&r()}catch(t){console.error(t),u&&r()}else u&&r()},c.prototype.appendSingleElement=function(t,e,n){var r=n||0,o=this,i=t[r];if(i&&e){var a=i.childNodes.length<1;o.parseAndAppendElement(i,e,a,function(n){i.childNodes.length>0?o.appendSingleElement(i.childNodes,n,0):o.appendSingleElement(t,e,r+1)}),i.childNodes.length>0&&t.length>0&&r<t.length&&o.appendSingleElement(t,e,r+1)}},c.prototype.appendSingleElementAsFragment=function(t,e){if(e&&void 0!==e.appendChild){var n=document.createRange();e.appendChild(n.createContextualFragment(t))}},c.prototype.unescapeScriptTags=function(t){return"string"==typeof t?t.replace(/<\\\/script>/g,"<\/script>"):""},p.prototype.searchQueryParams=function(){return(window.location.href.split("?")[1]||"").replace(/^\?/,"")},l.prototype.currentEntity=function(){return N.getState()},l.prototype.isSinglePageRender=function(){return h},l.prototype.isMainEntity=function(){return N.getState()===N.mainState},l.prototype.mainEntityState=function(){return N.mainState},l.prototype.currentEntityTitle=function(){return t.titles[N.getState()]},l.prototype.currentEntityScope=function(){return N.currentScope()},l.prototype.currentEntityStylesLink=function(){return t.styles[N.getState()]},l.prototype.currentEntityWrapperClasses=function(){return t.wrapperClasses[N.getState()]},l.prototype.currentEntityFontsSettings=function(){return t.fonts[N.getState()]},l.prototype.currentEntityHandle=function(){return t.handles[N.getState()]},l.prototype.currentEntityPath=function(){return this.currentEntityScope()&&this.currentEntityHandle()?"/"+this.currentEntityScope()+"/"+this.currentEntityHandle():null},l.prototype.currentEntityUrl=function(){return this.currentEntityScope()&&this.currentEntityHandle()?"https://{{ shop.domain }}/"+this.currentEntityScope()+"/"+this.currentEntityHandle():null},l.prototype.currentEntitySearchParams=function(){var t=["zpstest={{ zp_split_token | url_escape }}"],e=A.searchQueryParams().trim();return e.length>0&&t.push(e),t.join("&")},l.prototype.onEntityStateLoaded=function(t){"function"==typeof t&&(C?t.call(this):T.on("entityStateLoaded",t.bind(this)))},l.prototype.onEntityPrepared=function(t){"function"==typeof t&&(P?t.call(this):T.on("entityPrepared",t.bind(this)))},l.prototype.onEntityContentInjected=function(t){"function"==typeof t&&(L?t.call(this):T.on("entityContentInjected",t.bind(this)))},l.prototype.prepareAndAppendHTML=function(t,e){var n=H.unescapeScriptTags(t);if(f())H.appendSingleElementAsFragment(n,e);else{var r=H.parse(n);H.appendSingleElement(r,e,0)}},l.prototype.entitiesWrapperClasses=function(){return t.wrapperClasses},l.prototype.triggerEntityContentInjection=function(){L=!0,T.trigger("entityContentInjected")};var h=!!t.singlePageRender,S=function(){try{return window.sessionStorage.setItem("zipifyPages","true"),window.sessionStorage.removeItem("zipifyPages"),!0}catch(t){return console.error("checkStorageAccessibilityError",t),!1}}(),m=function(){var e;return e=t.lastSync?parseInt(t.lastSync):(new Date).getTime(),isNaN(e)?0:e}(),E=new r,v=new o,I=new n,w=new u,T=new i,C=!1,P=!1,L=!1,b=new l,N=new s,H=new c,A=new p,F=new a(t.dataSet);T.on("entityStateLoaded",function(){b.isSinglePageRender()?y():w.isCachedContentExpired()?N.loadEntitySource():(g(),y())}),T.on("alternativeSourceLoaded",function(t){w.init(t),w.saveEntityParts(),g(),y()}),T.on("alternativeSourceLoadingError",function(t){console.error("alternativeSourceLoadingError",t),N.setState(N.mainState),y()}),T.on("alternativeSourceTimeoutError",function(t){console.error("alternativeSourceTimeoutError",t),N.setState(N.mainState),y()}),T.on("currentStateSelected",function(t){var e=N.getAvailableState(t);N.setState(e),d()}),T.on("currentStateSelectionError",function(t){console.error("currentStateSelectionError",t),N.setState(N.mainState),d()}),N.getState()?d():N.loadCurrentState(),window.ZipifyPages=window.ZipifyPages||{},window.ZipifyPages.SplitTest=b}({{ zp_split_data_string }});</script>{% assign zp_split_data_string = '' %}
<script>!function(){var t=!1;window.ZipifyPages.SplitTest.onEntityStateLoaded(function(){if(!t){t=!0;var e=this.currentEntityStylesLink();if(e){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(i)}}})}();</script>{% endif %}{% capture zp_entity_data %}
  {% if zp_use_favicon == true %}
    {% assign zp_custom_favicon = shop.metafields['zipifypages']['faviconpath'] | strip | replace: 'https://s3.amazonaws.com/shopify-pages-development/shops/', 'https://cdn02.zipify.com/' %}
    {% if zp_custom_favicon.size > 0 %}
      <link rel="shortcut icon" href="{{ zp_custom_favicon }}" type="image/png"/>
    {% else %}
      {% capture zp_replace_integration %}<zp_favicon_integration><link rel="shortcut icon" href="{{ 'favicon.png' | asset_url }}" type="image/png" /></zp_favicon_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_favicon_integration>', '' | replace: '</zp_favicon_integration>', '' | strip }}{% assign zp_replace_integration = '' %}
    {% endif %}
  {% endif %}
{% endcapture %}{{ zp_entity_data | strip }}{% assign zp_entity_data = '' %}
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>{% if zp_alternative_entity_present == true %}
<script>!function(){var t=!1;window.ZipifyPages.SplitTest.onEntityStateLoaded(function(){if(!t){t=!0;var n=this.currentEntityFontsSettings();if(n)try{WebFont.load(n)}catch(t){console.error(t)}}})}();</script>{% else %}
<script>try { WebFont.load({classes:false,timeout:9000,{{ zp_entity_fonts_settings }}}) } catch(e) { console.error(e) }</script>{% assign zp_entity_fonts_settings = '' %}{% endif %}
{% assign zp_content_for_header = content_for_header %}{% capture zp_entity_data %} {% if zp_content_for_header contains '_gaUTrackerOptions' %} {% assign zp_ga_setup = 'basic' %} {% else %} {% assign zp_ga_setup = 'enhanced' %} {% endif %}{% endcapture %}<script>!function(){function n(n){this.integrations=n}function i(){return"function"==typeof l.currentEntityPath&&l.currentEntityPath()?l.currentEntityPath():window.location.pathname}function t(){return"function"==typeof l.currentEntityTitle&&l.currentEntityTitle()?l.currentEntityTitle():document.title}function e(){return"function"==typeof l.currentEntitySearchParams?"?"+l.currentEntitySearchParams():null}function o(){return"function"==typeof l.currentEntityUrl?l.currentEntityUrl():null}function r(){var n=o();if(n){var i=e();return i?n+i:n}return null}function a(){var n=i();if(n){var t=e();return t?n+t:n}return null}function w(n){if(c&&n.indexOf("trackify")>-1){var i=!!window.fbq,t=["init"],e=["track.PageView"],o=[],r=[];if(window.fbq=function(){var n=arguments[0],i=n+"."+arguments[1];t.indexOf(n)>-1&&o.indexOf(n)>-1||e.indexOf(i)>-1&&r.indexOf(i)>-1||(o.push(n),r.push(i),window.fbq.callMethod?window.fbq.callMethod.apply(window.fbq,arguments):window.fbq.queue.push(arguments))},window._fbq=window._fbq||window.fbq,window.fbq.push=window.fbq,window.fbq.loaded=!0,window.fbq.version="2.0",window.fbq.queue=[],!i){var a=document.createElement("script");a.async=!0,a.src="https://connect.facebook.net/en_US/fbevents.js";var w=document.getElementsByTagName("script")[0];w.parentNode.insertBefore(a,w)}}}function f(){if(!p&&(p=!0,void 0!==window.ga)){var n=r(),i=a(),e=t();n&&window.ga("set","location",n),i&&window.ga("set","page",i),e&&window.ga("set","title",e)}}var c=!1,u=[],d=!1,s="{{ zp_ga_setup }}",p=!1;n.prototype.init=function(){if(!c){c=!0,w(this.integrations);for(var n=0,i=u.length;n<i;n++)u[n].call();u=[]}},n.prototype.ready=function(n){"function"==typeof n&&(c?n.call():u.push(n))},n.prototype.page=function(){if(!d){d=!0;var n=arguments;void 0!==l&&"function"==typeof l.onEntityStateLoaded?(window.ShopifyAnalytics.lib.url=function(){var n=r();if(n)return n;var i=this.canonical();if(i)return i.indexOf("?")>0?i:i+window.location.search;var t=window.location.href,e=t.indexOf("#");return-1===e?t:t.slice(0,e)},window.ShopifyAnalytics.lib.pageDefaults=function(){var n=window.location.href,o=n.indexOf("?");return n=-1===o?"":n.slice(o),o=n.indexOf("#"),n=-1===o?n:n.slice(0,o),n="?"===n?"":n,{path:i(),referrer:document.referrer,search:e()||n,title:t(),url:this.url(),properties:{}}},window.ZipifyPages.SplitTest.onEntityStateLoaded(function(){window.ShopifyAnalytics.lib.page.call(window.ShopifyAnalytics.lib,n)})):window.ShopifyAnalytics.lib.page.call(window.ShopifyAnalytics.lib,n)}},window.ZipifyPages=window.ZipifyPages||{},window.ZipifyPages.currency="{{ shop.currency | url_escape }}",window.ZipifyPages.shopDomain="{{ shop.permanent_domain }}",window.ZipifyPages.integrations="{{ zp_app_integrations | join: ',' }}".split(",");var l=window.ZipifyPages.SplitTest,y=new n(window.ZipifyPages.integrations);void 0!==l&&("basic"===s?(window.GoogleAnalyticsObject="ga",window.ga=window.ga||function(){window.ga.q.push(arguments),"create"===arguments[0]&&f()},window.ga.q=window.ga.q||[],window.ga.l=1*new Date):y.ready(f)),window.ZipifyPages.ShopifyAnalytics=y,window.ZipifyPages.eventsSubscriptions=[],window.ZipifyPages.on=function(n,i){window.ZipifyPages.eventsSubscriptions.push([n,i])}}();</script>{% capture zp_entity_data %}
  {% assign zp_entity_scripts = '' | append: zp_current_entity.metafields['zipifypages'][zp_scripts_metafield_key] | split: '|;|~|;|' %}
{% assign zp_entity_header_scripts = '' | append: zp_entity_scripts[0] | strip %}
{% assign zp_entity_footer_scripts = '' | append: zp_entity_scripts[1] | strip %}
{% assign zp_entity_scripts = '' %}
  {% assign zp_replacement_key = '</script' %}
  {% assign zp_replacement_value = '<\/script' %}
  {% if zp_entity_header_scripts.size > 0 %}
    {% if zp_alternative_entity_present == true %}
      <script type="text/template" id="zp-main-header-scripts">{{ zp_entity_header_scripts | replace: zp_replacement_key, zp_replacement_value }}</script>
    {% else %}
      {{ zp_entity_header_scripts }}
    {% endif %}
    {% assign zp_entity_header_scripts = '' %}
  {% endif %}
{% endcapture %}{{ zp_entity_data | strip }}{% capture zp_entity_data %}
  {% if zp_alternative_entity_present == true and zp_alternative_header_scripts.size > 0 %}
    {% assign zp_replacement_key = '</script' %}
    {% assign zp_replacement_value = '<\/script' %}
    <script type="text/template" id="zp-alternative-header-scripts">{{ zp_alternative_header_scripts | replace: zp_replacement_key, zp_replacement_value }}</script>
    {% assign zp_alternative_header_scripts = '' %}
  {% endif %}
{% endcapture %}{{ zp_entity_data | strip }}{% assign zp_entity_data = '' %}{% if zp_alternative_entity_present == true %}
<script>!function(){var e=!1;window.ZipifyPages.SplitTest.onEntityStateLoaded(function(){if(!e){e=!0;var t=document.querySelector("#zp-"+this.currentEntity()+"-header-scripts");if(t){var n=document.getElementsByTagName("head")[0];this.prepareAndAppendHTML(t.innerHTML,n)}}})}();</script>{% endif %}{% if zp_alternative_entity_present == false %}
{{ zp_content_for_header | replace: 'window.ShopifyAnalytics.merchantGoogleAnalytics.call(', 'window.ZipifyPages.ShopifyAnalytics.init();window.ShopifyAnalytics.merchantGoogleAnalytics.call(' | replace: 'doShift(true)', '' | replace: 'bundle-upsell.smar7apps.com', '' | strip }}{% else %}
{{ zp_content_for_header | replace: 'window.ShopifyAnalytics.merchantGoogleAnalytics.call(', 'window.ZipifyPages.ShopifyAnalytics.init();window.ShopifyAnalytics.merchantGoogleAnalytics.call(' | replace: 'doShift(true)', '' | replace: 'bundle-upsell.smar7apps.com', '' | replace: 'window.ShopifyAnalytics.lib.page(', 'window.ZipifyPages.ShopifyAnalytics.page(' | strip }}{% endif %}{% assign zp_content_for_header = '' %}